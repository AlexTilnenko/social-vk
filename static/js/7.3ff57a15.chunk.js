(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[7],{129:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(11),i=t(5),c=t(34),u=t(25),l=t(6),s=t.n(l),f=t(14),p=t(16),m=t(2),d=function(e){return{type:m.i,payload:e}},g=function(e){return{type:m.p,payload:e}},v=function(){var e=Object(f.a)(s.a.mark((function e(n,t,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:0===e.sent.resultCode&&n(g(t));case 4:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();function b(e,n){return e===n}function h(e,n,t){if(null===n||null===t||n.length!==t.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e(n[a],t[a]))return!1;return!0}function w(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var t=n.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+t+"]")}return n}var y=function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=0,i=r.pop(),c=w(r),u=e.apply(void 0,[function(){return o++,i.apply(null,arguments)}].concat(t)),l=e((function(){for(var e=[],n=c.length,t=0;t<n;t++)e.push(c[t].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=i,l.dependencies=c,l.recomputations=function(){return o},l.resetRecomputations=function(){return o=0},l}}((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,t=null,r=null;return function(){return h(n,t,arguments)||(r=e.apply(null,arguments)),t=arguments,r}}));var E=y((function(e){return e.users}),(function(e){var n=e.totalUsersCount,t=e.pageSize;return Math.ceil(n/t)})),_=function(e){return e.users},k=t(19),N=t(86),P=t.n(N),C=t(119),j=t(12);var O=function(e){var n=e.handler,t=e.disabledTrigger,r=e.icoId;return a.a.createElement("button",{className:"pagination__btn-item pagination__block",onClick:n,disabled:t},a.a.createElement("svg",{className:"pagination__btn-ico"},a.a.createElement("use",{href:j.a+r})))},F=a.a.memo((function(e){for(var n=e.pagesCount,t=e.currentPage,o=e.onPageChange,i=e.isLoading,c=e.visiblePartSize,u=void 0===c?10:c,l=Object(r.useState)(1),s=Object(k.a)(l,2),f=s[0],p=s[1],m=[],d=1;d<=n;d++)m.push(d);var g=Math.ceil(n/u),v=(f-1)*u+1,b=f*u;return a.a.createElement("ul",{className:"pagination"},f>1&&a.a.createElement("div",{className:"pagination__btn-group"},a.a.createElement(O,{handler:function(){p(1),o(1)},disabledTrigger:i,icoId:"#double-arrow"}),a.a.createElement(O,{handler:function(){t<=v&&p(f-1),o(t-1)},disabledTrigger:i,icoId:"#arrow"})),m.filter((function(e){return e>=v&&e<=b})).map((function(e){return a.a.createElement("li",{key:e,className:P()("pagination__item","pagination__block",{active:t===e}),onClick:function(){return o(e)}},e)})),g>f&&a.a.createElement("div",{className:"pagination__btn-group"},a.a.createElement(O,{handler:function(){p(g),o((g-1)*u+1)},disabledTrigger:i,icoId:"#double-arrow"}),a.a.createElement(O,{handler:function(){t>=b&&p(f+1),o(t+1)},disabledTrigger:i,icoId:"#arrow"})),m.length>10&&a.a.createElement(C.c,{initialValues:{currentPage:""},onSubmit:function(e,n){return function(e,n){var t=e.currentPage,r=n.resetForm,a=Math.ceil(t/u);t>=1&&a<=g&&(p(a),o(t),r())}(e,{resetForm:n.resetForm})}},(function(e){var n=e.values;return a.a.createElement(C.b,{className:"pagination__form"},a.a.createElement(C.a,{type:"number",name:"currentPage",className:"pagination__form-input",value:n.currentPage}),a.a.createElement("button",{className:"pagination__form-btn",disabled:i,type:"submit"},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"))})))})),I=t(15),x=t(29),S=a.a.memo((function(e){var n=e.id,t=e.name,r=e.photos,o=e.followed,i=e.followingInProgress,c=e.onClickUnfollow,u=e.onClickFollow;return a.a.createElement("li",{className:"users__item block",key:n},a.a.createElement(I.b,{to:"/profile/".concat(n)},a.a.createElement("span",{className:"users__item-photo avatar"},a.a.createElement("img",{src:r.large||x.a,alt:t})),a.a.createElement("span",{className:"users__item-name"},t)),a.a.createElement("button",{className:P()("btn",{"btn--unfollow":o,"btn--follow":!o}),onClick:o?function(){return c(n)}:function(){return u(n)},disabled:i.some((function(e){return e===n}))},o?"\u0412\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u044b":"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"))}));n.default=Object(o.d)(c.a)((function(){var e=Object(i.b)(),n=Object(i.c)(_),t=n.items,o=n.pageSize,c=n.currentPage,l=n.isLoading,g=n.followingInProgress,b=Object(i.c)(E);Object(r.useEffect)((function(){e(function(e,n){return function(){var t=Object(f.a)(s.a.mark((function t(r){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:m.k}),t.next=3,p.d.getUsers(e,n);case 3:a=t.sent,r((o=a,{type:m.n,payload:o}));case 5:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}()}(c,o))}),[c]);var h=function(n){e(function(e){return function(){var n=Object(f.a)(s.a.mark((function n(t){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(d({isFetching:!0,id:e})),v(t,e,p.d.followUser);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n))},w=function(n){e(function(e){return function(){var n=Object(f.a)(s.a.mark((function n(t){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(d({isFetching:!0,id:e})),v(t,e,p.d.unfollowUser);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(n))};return a.a.createElement("div",{className:"users"},l&&a.a.createElement(u.a,null),a.a.createElement(F,{pagesCount:b,currentPage:c,onPageChange:function(n){e(function(e){return{type:m.h,payload:e}}(n))},isLoading:l,visiblePagesSize:10}),a.a.createElement("ul",{className:"users__list"},t.map((function(e){var n=e.id,t=e.name,r=e.followed,o=e.photos;return a.a.createElement(S,{key:n,id:n,name:t,photos:o,followed:r,followingInProgress:g,onClickUnfollow:w,onClickFollow:h})}))))}))}}]);
//# sourceMappingURL=7.3ff57a15.chunk.js.map